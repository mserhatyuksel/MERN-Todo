(this.webpackJsonpmern_todo=this.webpackJsonpmern_todo||[]).push([[0],{114:function(e,t,n){"use strict";n.r(t);var c,r=n(0),a=n.n(r),s=n(40),o=n.n(s),i=(n(92),n(16)),u=n(5),l=n(7),d=n(10),j=n(26),b=n(29),O=n.n(b),f=Object(j.b)("todos/getTodosAsync",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O()("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,"/todos/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),p=Object(j.b)("todos/addTodoAsync",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,"/todos/add"),{text:t.text,username:t.user});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),m=Object(j.b)("todos/toggleTodoAsync",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n,c,r;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,c=t.data,e.next=3,O.a.put("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,"/todos/").concat(n),{isCompleted:!c.isCompleted});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(j.b)("todos/removeTodoAsync",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,"/todos/").concat(t));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=Object(j.b)("todos/clearCompletedAsync",function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){var n;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.delete("".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_URL,"/todos/completed/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(j.c)({name:"todos",initialState:{items:[],activeFilter:"all",isLoading:!0,error:null},reducers:{removeTodo:function(e,t){var n=t.payload,c=e.items.filter((function(e){return e._id!==n}));e.items=c},changeActiveFilter:function(e,t){e.activeFilter=t.payload},clearCompleted:function(e){var t=e.items.filter((function(e){return!1===e.isCompleted}));e.items=t}},extraReducers:(c={},Object(u.a)(c,f.pending,(function(e,t){e.isLoading=!0})),Object(u.a)(c,f.fulfilled,(function(e,t){e.isLoading=!1,e.items=t.payload})),Object(u.a)(c,f.rejected,(function(e,t){e.isLoading=!1,e.error=t.error.message})),Object(u.a)(c,p.fulfilled,(function(e,t){e.items.push(t.payload)})),Object(u.a)(c,m.fulfilled,(function(e,t){var n=t.payload,c=n._id,r=n.isCompleted,a=e.items.findIndex((function(e){return e._id===c}));e.items[a].isCompleted=!r})),Object(u.a)(c,h.fulfilled,(function(e,t){var n=e.items.findIndex((function(e){return e._id===t.payload}));e.items.splice(n,1)})),Object(u.a)(c,_.fulfilled,(function(e,t){e.items=t.payload})),c)}),v=function(e){return e.todos.items},g=function(e){return"all"===e.todos.activeFilter?e.todos.items:e.todos.items.filter((function(t){return"active"===e.todos.activeFilter?!1===t.isCompleted:!0===t.isCompleted}))},S=x.actions,C=S.changeActiveFilter,E=(S.clearCompleted,x.reducer),T=n(1),N=function(){var e=Object(i.c)(v),t=e.filter((function(e){return!e.isCompleted})).length,n=Object(i.c)((function(e){return e.todos.activeFilter})),c=Object(i.c)((function(e){return e.user.username})),r=Object(i.b)(),a=function(e){r(C(e))};return e.length<1?null:Object(T.jsxs)("footer",{className:"footer",children:[Object(T.jsxs)("span",{className:"todo-count",children:[Object(T.jsxs)("strong",{children:[t," "]}),"item",t>1&&"s"," left"]}),Object(T.jsxs)("ul",{className:"filters",children:[Object(T.jsx)("li",{children:Object(T.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),a("all")},className:"all"===n?"selected":"",children:"All"})}),Object(T.jsx)("li",{children:Object(T.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),a("active")},className:"active"===n?"selected":"",children:"Active"})}),Object(T.jsx)("li",{children:Object(T.jsx)("a",{href:"/",onClick:function(e){e.preventDefault(),a("completed")},className:"completed"===n?"selected":"",children:"Completed"})})]}),t!==e.length&&Object(T.jsx)("button",{onClick:function(){return r(_(c))},className:"clear-completed",children:"Clear completed"})]})},R=n(8),A=n(136),L=Object(j.c)({name:"user",initialState:{username:localStorage.getItem("logged"),isLoggedIn:!1},reducers:{setUser:function(e,t){e.username=t.payload},setLogin:function(e,t){e.isLoggedIn=t.payload}}}),w=L.actions,y=w.setUser,F=w.setLogin,P=L.reducer,D=function(){var e=Object(r.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],a=Object(i.c)((function(e){return e.user.username})),s=Object(i.b)(),o=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,s(p({text:n,user:a}));case 3:c("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("header",{className:"header",children:[Object(T.jsx)("h1",{className:"title",children:"todos"}),Object(T.jsx)(A.a,{className:"logout",variant:"contained",onClick:function(){localStorage.setItem("logged",""),s(y("")),s(F(!1))},children:"LOGOUT"}),Object(T.jsx)("form",{onSubmit:o,children:Object(T.jsx)("input",{className:"new-todo",placeholder:"What needs to be done?",value:n,onChange:function(e){return c(e.target.value)},autoFocus:!0})})]})},U=function(){var e=Object(i.b)(),t=Object(i.c)(g),n=Object(i.c)((function(e){return e.user.username})),c=Object(i.c)((function(e){return e.todos.isLoading})),a=Object(i.c)((function(e){return e.todos.error}));Object(r.useEffect)((function(){e(f(n))}),[n,e]);var s=function(){var t=Object(d.a)(Object(l.a)().mark((function t(n,c){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(m({id:n,data:{isCompleted:c}}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(T.jsx)("section",{className:"main",children:a?Object(T.jsx)("h3",{children:a}):c?Object(T.jsx)("h3",{children:"Loading..."}):Object(T.jsx)("ul",{className:"todo-list",children:t.map((function(t){return Object(T.jsx)("li",{className:t.isCompleted?"completed":"",children:Object(T.jsxs)("div",{className:"view",children:[Object(T.jsx)("input",{className:"toggle",type:"checkbox",checked:t.isCompleted,onChange:function(){return s(t._id,t.isCompleted)}}),Object(T.jsx)("label",{children:t.text}),Object(T.jsx)("button",{className:"destroy",onClick:function(){return n=t._id,void(window.confirm("Are you sure?")&&e(h(n)));var n}})]})},t._id)}))})})},k=n(36),H=n(138),W=n(139),I=n(137),K=n(140),B=n(47),V=n.n(B),z=function(){var e=Object(i.b)(),t=Object(r.useState)(""),n=Object(R.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(""),o=Object(R.a)(s,2),u=o[0],j=o[1],b=function(){var t=Object(d.a)(Object(l.a)().mark((function t(n){return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,O.a.post("http://localhost:4000/api/auth/login",{username:c,password:u}).then((function(){e(y(c)),e(F(!0)),localStorage.setItem("logged",c)})).catch((function(e){console.log("Error: ",e.message)}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h1",{className:V.a.title,children:"Login"}),Object(T.jsxs)("form",{className:V.a.container,onSubmit:b,children:[Object(T.jsxs)(H.a,{className:V.a.input,children:[Object(T.jsx)(W.a,{htmlFor:"username",children:"Username"}),Object(T.jsx)(I.a,{id:"username",value:c,onChange:function(e){a(e.target.value)}})]}),Object(T.jsxs)(H.a,{className:V.a.input,children:[Object(T.jsx)(W.a,{htmlFor:"password",children:"Password"}),Object(T.jsx)(I.a,{id:"password",type:"password",value:u,onChange:function(e){j(e.target.value)}})]}),Object(T.jsxs)(A.a,{variant:"contained",className:V.a.login_btn,type:"submit",children:[Object(T.jsx)(K.a,{}),"Login"]}),Object(T.jsx)(k.b,{to:"/register",children:"Register"})]})]})},G=function(){var e=Object(i.c)((function(e){return e.user.isLoggedIn}));return Object(T.jsx)(T.Fragment,{children:e?Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(D,{}),Object(T.jsx)(U,{}),Object(T.jsx)(N,{})]}):Object(T.jsx)(z,{})})},J=n(48),M=n.n(J),Y=function(){var e=Object(r.useState)(""),t=Object(R.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(R.a)(a,2),o=s[0],i=s[1],u=Object(r.useState)(""),j=Object(R.a)(u,2),b=j[0],f=j[1],p=function(){var e=Object(d.a)(Object(l.a)().mark((function e(t){return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,O.a.post("http://localhost:4000/api/auth/register",{username:n,password:o}).then((function(e){e&&f("You have successfully registered.")})).catch((function(e){f(e.message)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)("h1",{className:M.a.title,children:"Register"}),Object(T.jsxs)("form",{className:M.a.container,onSubmit:p,children:[Object(T.jsxs)(H.a,{className:M.a.input,children:[Object(T.jsx)(W.a,{htmlFor:"username",children:"Username"}),Object(T.jsx)(I.a,{id:"username",value:n,onChange:function(e){c(e.target.value)}})]}),Object(T.jsxs)(H.a,{className:M.a.input,children:[Object(T.jsx)(W.a,{htmlFor:"password",children:"Password"}),Object(T.jsx)(I.a,{id:"password",type:"password",value:o,onChange:function(e){i(e.target.value)}})]}),Object(T.jsx)(A.a,{variant:"contained",type:"submit",className:M.a.logout_btn,children:"Register"}),Object(T.jsx)("span",{children:b}),Object(T.jsx)(k.b,{to:"/",children:"Homepage"})]})]})},q=n(6);var Q=function(){var e=Object(i.b)();return Object(r.useEffect)((function(){var t=localStorage.getItem("logged");t&&(e(F(!0)),e(y(t)))}),[e]),Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(q.c,{children:[Object(T.jsx)(q.a,{exact:!0,path:"/",element:Object(T.jsx)(G,{})}),Object(T.jsx)(q.a,{path:"/register",element:Object(T.jsx)(Y,{})})]})})},X=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,142)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},Z=Object(j.a)({reducer:{user:P,todos:E}});o.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(i.a,{store:Z,children:Object(T.jsx)(k.a,{children:Object(T.jsx)(Q,{})})})}),document.getElementById("root")),X()},47:function(e,t,n){e.exports={title:"Login_title__2xiNV",container:"Login_container__1dzS1",input:"Login_input__NNSHF",login_btn:"Login_login_btn__34e9F"}},48:function(e,t,n){e.exports={title:"Register_title__6oFo8",container:"Register_container__20m3U",input:"Register_input__1GBsW",logout_btn:"Register_logout_btn__3Tz-A"}},92:function(e,t,n){}},[[114,1,2]]]);
//# sourceMappingURL=main.7785e3bc.chunk.js.map